#include <stdio.h>
#include <stdlib.h>
#include <getopt.h>

int main(int argc, char **argv) {
   int c;
   int digit_optind = 0;

   while (1) {
       int this_option_optind = optind ? optind : 1;
       int option_index = 0;
       static struct option long_options[] = {
           {"cargs",     required_argument, 0,  0 },
           {"dargs",  required_argument, 0,  0 },
           {"fargs",  required_argument, 0,  0 }
       };

       c = getopt_long(argc, argv, "cdf:args",long_options, &option_index);

       if (c == -1)
           break;

       switch (c) {
       case 0:
           printf("%s: ", long_options[option_index].name);
           if (optarg)
               printf("%s", optarg);
           printf("\n");
           break;
        case '?':
           break;
        default:
           printf("?? getopt returned character code 0%o ??\n", c);
       }
   }
   return 0;
}
